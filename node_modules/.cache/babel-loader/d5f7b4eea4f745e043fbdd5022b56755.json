{"ast":null,"code":"var _jsxFileName = \"/home/xelpmoc/projects/react-notes/src/components/Login/Login.js\";\nimport React, { Component } from \"react\";\nimport { Form, Button, Container } from \"react-bootstrap\";\nimport { callAPI } from \"../../apis/api\";\nimport Modal from \"../UI/Modal/Modal\";\nimport Header from \"../Header/Header\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: \"\",\n      password: \"\"\n    };\n\n    this.hideModalHandler = () => {\n      this.setState({\n        showModal: false\n      });\n    };\n\n    this.handleSubmission = async () => {\n      if (!this.username.value || !this.password.value) {\n        this.setState({\n          showModal: true,\n          message: \"FILL ALL FIELDS\"\n        });\n      } else {\n        let requestObject = {\n          username: this.username.value,\n          password: this.password.value\n        };\n        console.log(\"SEND THIS\", requestObject);\n        let result = await callAPI(\"POST\", \"login\", JSON.stringify(requestObject));\n        console.log(\"RESULT\", result);\n\n        if (result._id) {\n          console.log(\"SUCCES99S\", result); //    this.setState({showModal:true,message:\"SUCCESS\"});\n\n          localStorage.setItem(\"token\", result.token);\n          this.props.history.push(\"/profile\"); // this.props.history.push(\"/profile\", {\n          //   isAuthenticated: true,\n          //   user: result\n          // });\n        } else {\n          console.log(\"ERROR\", result.error);\n          this.setState({\n            showModal: true,\n            message: result.error\n          });\n        }\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(Header, {\n      isAuthenticated: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }), React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      show: this.state.showModal,\n      message: this.state.message,\n      modalClosed: this.hideModalHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), React.createElement(Form.Group, {\n      controlId: \"formUsername\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Username\"), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Enter your username\",\n      ref: username => this.username = username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"formPassword\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Password\"), React.createElement(Form.Control, {\n      type: \"password\",\n      placeholder: \"Password\",\n      ref: password => this.password = password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })), React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.handleSubmission,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Submit\")));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/xelpmoc/projects/react-notes/src/components/Login/Login.js"],"names":["React","Component","Form","Button","Container","callAPI","Modal","Header","Login","state","username","password","hideModalHandler","setState","showModal","handleSubmission","value","message","requestObject","console","log","result","JSON","stringify","_id","localStorage","setItem","token","props","history","push","error","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Button, Container } from \"react-bootstrap\";\nimport { callAPI } from \"../../apis/api\";\nimport Modal from \"../UI/Modal/Modal\";\nimport Header from \"../Header/Header\";\n\nclass Login extends Component {\n  state = {\n    username: \"\",\n    password: \"\"\n  };\n\n  hideModalHandler = () => {\n    this.setState({ showModal: false });\n  };\n\n  handleSubmission = async () => {\n    if (!this.username.value || !this.password.value) {\n      this.setState({ showModal: true, message: \"FILL ALL FIELDS\" });\n    } else {\n      let requestObject = {\n        username: this.username.value,\n        password: this.password.value\n      };\n      console.log(\"SEND THIS\", requestObject);\n      let result = await callAPI(\n        \"POST\",\n        \"login\",\n        JSON.stringify(requestObject)\n      );\n      console.log(\"RESULT\", result);\n\n      if (result._id) {\n        console.log(\"SUCCES99S\", result);\n        //    this.setState({showModal:true,message:\"SUCCESS\"});\n        localStorage.setItem(\"token\", result.token);\n        this.props.history.push(\"/profile\");\n        // this.props.history.push(\"/profile\", {\n        //   isAuthenticated: true,\n        //   user: result\n        // });\n      } else {\n        console.log(\"ERROR\", result.error);\n        this.setState({ showModal: true, message: result.error });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <Container>\n        <Header isAuthenticated={false} />\n        <Form>\n          <Modal\n            show={this.state.showModal}\n            message={this.state.message}\n            modalClosed={this.hideModalHandler}\n          ></Modal>\n          <Form.Group controlId=\"formUsername\">\n            <Form.Label>Username</Form.Label>\n            <Form.Control\n              type=\"text\"\n              placeholder=\"Enter your username\"\n              ref={username => (this.username = username)}\n            />\n          </Form.Group>\n\n          <Form.Group controlId=\"formPassword\">\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              placeholder=\"Password\"\n              ref={password => (this.password = password)}\n            />\n          </Form.Group>\n\n          <Button variant=\"primary\" onClick={this.handleSubmission}>\n            Submit\n          </Button>\n        </Form>\n      </Container>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}